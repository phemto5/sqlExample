{"version":3,"sources":["webpack:///webpack/bootstrap b0822abd2357c0d226d5","webpack:///./src/index.ts","webpack:///./src/LogFile.ts","webpack:///./src/Day.ts","webpack:///./src/products.json","webpack:///./src/StringLine.ts","webpack:///./src/TwoDayWindow.ts","webpack:///external \"fs\"","webpack:///./src/config.json"],"names":[],"mappings":"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","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b0822abd2357c0d226d5","import fs = require('fs');\r\nimport { Day } from './Day';\r\nimport * as db from './Database';\r\nimport { LogFile } from './LogFile';\r\n\r\n// console.log(`Started Server ${new Date()}`);\r\nlet config = require('./config.json');\r\n// console.log(`Config Loaded`);\r\n// console.log(config);\r\nlet processing: boolean = false\r\n// console.log(`Processing : ${processing}`);\r\n// console.log(`Setting up Intervals`);\r\nsetInterval(() => {\r\n    if (!processing) {\r\n        // console.log(`${processing} ...\\n\\tStarting next process`);\r\n        var days = new LogFile(config.filePath).days;\r\n        days.forEach(day => {\r\n            // db.UpsertDay(day);//not readty to send to databse yet\r\n            // console.log(\"Tried to Upcert\");\r\n            // console.log(`${day.getDate()} solidworks ${day.getHighMark('solidworks')}`);\r\n        })\r\n    } else {\r\n        // console.log(`${processing} ...\\n\\tDelaying next process for ${config.delaySeconds} seconds`);\r\n    }\r\n}, 1000 * config.delaySeconds);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","import { Day } from './Day';\r\nimport { StringLine } from './StringLine';\r\nimport { TwoDayWindow } from './TwoDayWindow';\r\nimport fs = require('fs');\r\n\r\nexport class LogFile {\r\n    logPath: string;\r\n    days: Day[];\r\n    constructor(sourcePath: string) {\r\n        this.logPath = sourcePath;\r\n        this.days = this.consumeFile(this.logPath);\r\n    };\r\n    private consumeFile(filePath: string): Day[] {\r\n        let days: Day[];\r\n        let fileString = fs.readFileSync(filePath, 'utf-8');\r\n        let lineArray: StringLine[] = fileString.split(/\\r\\n/g).map(str => {\r\n            return new StringLine(str);\r\n        });\r\n        let window = new TwoDayWindow(new Day());\r\n        lineArray.forEach((line: StringLine, ind: number, arr: StringLine[]) => {\r\n            if (ind === 0) {\r\n                window.current.addLine(line.lineString);\r\n            } else {\r\n                let lineWindow = [line, arr[ind - 1]];\r\n                if (LogFile.isNewDay(lineWindow)) {\r\n                    window.nextDay(new Day());\r\n                }\r\n                if (LogFile.isPreviousDay(lineWindow)) {\r\n                    window.previous.addLine(line.lineString);\r\n                } else {\r\n                    window.current.addLine(line.lineString);\r\n                }\r\n            }\r\n        })\r\n        days = window\r\n            .finishWindow()\r\n            .allDays;\r\n        return days;\r\n    }\r\n    private static isNewDay(lineInd: StringLine[]) {\r\n        let result: boolean = false;\r\n        let times = lineInd.map(stringLine => {\r\n            return stringLine.getLineHour();\r\n            // return 5;\r\n        })\r\n        let currentTime = times[0],\r\n            previousTime = times[1]\r\n        if (currentTime < previousTime) {\r\n            if (previousTime - currentTime > .5) {\r\n                result = true;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    private static isPreviousDay(lineInd: StringLine[]) {\r\n        let result: boolean = false;\r\n        let times = lineInd.map(stringLine => {\r\n            return stringLine.getLineHour();\r\n            // return 6;\r\n        })\r\n        let currentTime = times[0],\r\n            previousTime = times[1]\r\n        if (currentTime > (previousTime + 12)) {\r\n            result = true;\r\n        }\r\n        return result;\r\n    }\r\n\r\n}\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/LogFile.ts","export class Day {\r\n    products = require('./products.json').products;\r\n    lines: string[]\r\n    constructor() {\r\n        this.lines = [];\r\n    }\r\n    getHighMark(product: string): number {\r\n        let highwater: number = 0;\r\n        let current: number = 0;\r\n        let prodExp: RegExp = new RegExp(product, 'g');\r\n        this.lines.forEach((line: string) => {\r\n            if (line.match(prodExp)) {\r\n                if (line.match(/IN:/gi)) {\r\n                    current++;\r\n                }\r\n                if (line.match(/OUT:/gi)) {\r\n                    current--;\r\n                }\r\n            }\r\n            if (current > highwater) {\r\n                highwater = current;\r\n            }\r\n            if (current < 0) {\r\n                current = 0;\r\n            }\r\n        });\r\n        return highwater;\r\n    }\r\n    getDate() {\r\n        let dateString: string;\r\n        this.lines.forEach((line: string) => {\r\n            if (line.match(/TIMESTAMP/gi)) {\r\n                dateString = line.split(\" \").pop();\r\n            }\r\n        })\r\n        return new Date(dateString);\r\n    }\r\n    addLine(string: string): void {\r\n        if (string) {\r\n            this.lines.push(string);\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/Day.ts","module.exports = {\n\t\"products\": [\n\t\t\"swofficepremium\",\n\t\t\"draftsightpremium\",\n\t\t\"solidworks\",\n\t\t\"swepdm_cadeditorandweb\",\n\t\t\"swepdm_processor\",\n\t\t\"swinspection_std\",\n\t\t\"swofficepro\"\n\t]\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/products.json\n// module id = 3\n// module chunks = 0","export class StringLine {\r\n    private _string: string = '';\r\n    constructor(str: string) {\r\n        this.lineString = str;\r\n    }\r\n    set lineString(str: string) {\r\n        this._string = str;\r\n    }\r\n    get lineString() {\r\n        return this._string;\r\n    }\r\n    getLineHour() {\r\n        let timeStringArray = this._string.substr(0, 8).split(':');\r\n        let timeNumbersArray = timeStringArray.map(segment => { return parseInt(segment, 10) })\r\n        let hours: number = timeNumbersArray[0] + (timeNumbersArray[1] / 60) + (timeNumbersArray[2] / 60 / 60);\r\n        return hours;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/StringLine.ts","import { Day } from './Day';\r\nexport class TwoDayWindow {\r\n    allDays: Day[];\r\n    current: Day;\r\n    previous: Day;\r\n    constructor(day: Day, prev?: Day) {\r\n        this.allDays = [];\r\n        this.current = day;\r\n        if (prev) {\r\n            this.previous = prev;\r\n        }\r\n    }\r\n    nextDay(day: Day) {\r\n        if (this.previous) {\r\n            this.allDays.push(this.previous);\r\n        }\r\n        this.previous = this.current;\r\n        this.current = day;\r\n        return this;\r\n    }\r\n    finishWindow() {\r\n        if (this.previous) {\r\n            this.allDays.push(this.previous);\r\n        }\r\n        this.allDays.push(this.current);\r\n        return this;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/TwoDayWindow.ts","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 6\n// module chunks = 0","module.exports = {\n\t\"filePath\": \"\\\\\\\\wsepdm\\\\c$\\\\Program Files (x86)\\\\SolidWorks Corp\\\\SolidNetWork License Manager\\\\lmgrd.log\",\n\t\"delaySeconds\": 1\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/config.json\n// module id = 7\n// module chunks = 0"],"sourceRoot":""}