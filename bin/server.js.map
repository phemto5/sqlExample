{"version":3,"sources":["webpack:///webpack/bootstrap 486f9ba6678d09472635","webpack:///./src/index.ts","webpack:///./src/LogFile.ts","webpack:///./src/Day.ts","webpack:///./src/products.json","webpack:///external \"fs\"","webpack:///./src/config.json"],"names":[],"mappings":"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","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 486f9ba6678d09472635","import fs = require('fs');\r\nimport { Day } from './Day';\r\nimport * as db from './Database';\r\nimport { LogFile } from './LogFile';\r\n\r\nconsole.log(`Started Server ${new Date()}`);\r\nlet config = require('./config.json');\r\nconsole.log(`Config Loaded`);\r\nconsole.log(config);\r\nlet processing: boolean = false\r\nconsole.log(`Processing : ${processing}`);\r\nconsole.log(`Setting up Intervals`);\r\nsetInterval(() => {\r\n    if (!processing) {\r\n        console.log(`${processing} ...\\n\\tStarting next process`);\r\n        var days = new LogFile(config.filePath).days;\r\n        days.forEach(day => {\r\n            // db.UpsertDay(day);//not readty to send to databse yet\r\n        })\r\n    } else {\r\n        console.log(`${processing} ...\\n\\tDelaying next process for ${config.delaySeconds} seconds`);\r\n    }\r\n}, 1000 * config.delaySeconds);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","import { Day } from './Day';\r\nimport fs = require('fs');\r\n\r\nexport class LogFile {\r\n    logPath: string;\r\n    days: Day[];\r\n    constructor(sourcePath: string) {\r\n        this.logPath = sourcePath;\r\n        this.days = this.consumeFile(this.logPath);\r\n    };\r\n    private consumeFile(filePath: string): Day[] {\r\n        let days: Day[];\r\n        let fileString = fs.readFileSync(filePath, 'utf-8');\r\n        let lineArray: string[] = fileString.split(/\\n\\r/g);\r\n        let window = new TwoDayWindow(new Day());\r\n        lineArray.forEach((str: string) => {\r\n            if (parseInt(str.substr(0, 2), 10) > 10) {\r\n\r\n            }\r\n        })\r\n        return days;\r\n    }\r\n}\r\nexport class TwoDayWindow {\r\n    current: Day;\r\n    previous: Day;\r\n    constructor(day: Day, prev?: Day) {\r\n        this.current = day;\r\n        if (prev) {\r\n            this.previous = prev;\r\n        }\r\n    }\r\n    nextDay(day: Day) {\r\n        this.previous = this.current;\r\n        this.current = day;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/LogFile.ts","export class Day {\r\n    products = require('./products.json').products;\r\n    lines: string[]\r\n    constructor() { }\r\n    getHighMark(product: string): number {\r\n        let highwater: number = 0;\r\n        let prodExp: RegExp = new RegExp(product, 'g');\r\n        this.lines.forEach((line: string) => {\r\n            if (line.match(prodExp)) {\r\n                if (line.match(/IN:/gi)) {\r\n                    highwater++;\r\n                }\r\n                if (line.match(/OUT:/gi)) {\r\n                    highwater--;\r\n                }\r\n            }\r\n        });\r\n        return highwater;\r\n    }\r\n    getDate() {\r\n        let dateString: string;\r\n        this.lines.forEach((line: string) => {\r\n            if (line.match(/TIMESTAMP/gi)) {\r\n                dateString = line.split(\" \").pop();\r\n            }\r\n        })\r\n        return new Date(dateString);\r\n    }\r\n    addLine(string: string): void {\r\n        if (string) {\r\n            this.lines.push(string);\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/Day.ts","module.exports = {\n\t\"products\": [\n\t\t\"swofficepremium\",\n\t\t\"draftsightpremium\",\n\t\t\"solidworks\",\n\t\t\"swepdm_cadeditorandweb\",\n\t\t\"swepdm_processor\",\n\t\t\"swinspection_std\",\n\t\t\"swofficepro\"\n\t]\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/products.json\n// module id = 3\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 4\n// module chunks = 0","module.exports = {\n\t\"filePath\": \"\\\\\\\\wsepdm\\\\c$\\\\Program Files (x86)\\\\SolidWorks Corp\\\\SolidNetWork License Manager\\\\lmgrd.log\",\n\t\"delaySeconds\": 30\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/config.json\n// module id = 5\n// module chunks = 0"],"sourceRoot":""}